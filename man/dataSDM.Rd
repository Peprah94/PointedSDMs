% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dataSDM.R
\name{dataSDM}
\alias{dataSDM}
\title{R6 class for creating a dataSDM object to be used in runModel}
\description{
A data object containing the data and the relevant information about the integrated model.
}
\examples{

## ------------------------------------------------
## Method `dataSDM$plot`
## ------------------------------------------------


\dontrun{

#Make data object
dataObj <- intModel(...)

#Plot a specific datasets
dataObj$plot(Datasets = c('dataset1', 'dataset2'))

#Plot all datasets
dataObj$plot()

#If speciesName specified in intModel, plot species
dataObj(Species = TRUE)

}

## ------------------------------------------------
## Method `dataSDM$addData`
## ------------------------------------------------

\dontrun{

#Make data object with specified components
dataObj <- intModel(...)

#Add new data with non-standardized names
dataObj$addData(dataset, responseCounts = responseCounts,
                responsePA = responsePA, trialsPA = trialsPA,
                markNames = markNames, markFamily = markFamily,
                pointCovariates = pointCovariates,
                speciesName = speciesName, Coordinates = Coordinates)

}

## ------------------------------------------------
## Method `dataSDM$addBias`
## ------------------------------------------------

\dontrun{

#Make dataObject
dataObj <- intModel(...)

#Add biasfield for a dataset
dataObj$addBias(datasetNames = 'dataset', biasField = inla.spde2.pcmatern(...))

}

## ------------------------------------------------
## Method `dataSDM$updateFormula`
## ------------------------------------------------

\dontrun{

#Make data object
dataObj <- intModel(...)

#View formulas for a dataset
dataObj$updateFormula(datasetName = 'dataset')
#View formula for a species if speciesName is non-null in intModel
dataObj$updateFormula(datasetName = 'dataset', speciesName = 'species')

#Change formula across a dataset
#Main purpose is to remove terms for a specific process
#So start with full model with intModel()
#And thin terms out with .$updateFormula()
dataObj$updateFormula(datasetName = 'dataset', Formula = ~ . -covariate)
dataObj$updateFormula(datasetName = 'dataset', Formula = ~ . -shared_spatial)

#If you would like to add a special term to the model, use the NewFormula argument
dataObj$updateFormula(datasetName = 'dataset', Formula ~ . + (covariate+1e-5)*scaling)
#And then also add that term to the components
dataObj$changeComponents(newComponent = 'scaling')

 }



## ------------------------------------------------
## Method `dataSDM$changeComponents`
## ------------------------------------------------

\dontrun{

#Make data object first
dataObj <- intModel(...)

#Change a component
dataObj$changeComponent(addComponent = 'dataset_bias(main = coordinates, model = dataset_bias_field, copy = "shared_spatial)')
#Should update the bias field

#Remove a component
datasetObj$changeComponent(removeComponent = 'shared_spatial')
#Will remove shared_spatial from the components + all the formulas it is in

}

## ------------------------------------------------
## Method `dataSDM$priorsFixed`
## ------------------------------------------------

\dontrun{

#Make data object
dataObj <- intModel(...)

#Change priors for the fixed effect
dataObj$priorsFixed(Effect = 'covariate', mean.linear = 2, prec.linear = 0.05)

#Change priors for intercept
dataObj$priorsFixed(Effect = 'intercept', datasetName = 'datasetname',
                    mean.linear = 2, prec.linear = 0.005)

}

## ------------------------------------------------
## Method `dataSDM$specifySpatial`
## ------------------------------------------------

\dontrun{

#Create data object
dataObj <- intModel(...)

#Specify spatial field
dataObj$specifySpatial(sharedSpatial = TRUE, PC = TRUE, prior.range = c(1,0.001), prior.sigma = c(1,0.001))
#Specify for a species
dataObj$specifySpatial(species = 'species', alpha = 1, PC = FALSE)

#Remove a spatial field
dataObj$specifySpatial(species = 'species', remove = TRUE)
#Which will also update the components and relevant formulas

}

## ------------------------------------------------
## Method `dataSDM$changeLink`
## ------------------------------------------------

\dontrun{

#Create data object
dataObj <- intModel(...)

#Print link function for a process

dataObj$changeLink(Dataset = Dataset, Species = Species)

#Change link function
dataObj$changeLink(Dataset = Dataset, Species = Species,
                   Link = "log")

}

## ------------------------------------------------
## Method `dataSDM$spatialBlock`
## ------------------------------------------------

\dontrun{

#Make data object
dataObj <- intModel(...)

#Block the points spatially
dataObj$spatialBlock(k = 5, rows = 2, cols = 5, plot = TRUE)

}


## ------------------------------------------------
## Method `dataSDM$addMesh`
## ------------------------------------------------

\dontrun{

#Make data object
dataObj <- intModel(...)

#Block the points spatially
dataObj$addMesh(Boundary = SpatialPolygons, cutoff=0.1, max.edge=c(0.1, 3), offset=c(1,1))

}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-print}{\code{dataSDM$print()}}
\item \href{#method-plot}{\code{dataSDM$plot()}}
\item \href{#method-addData}{\code{dataSDM$addData()}}
\item \href{#method-addBias}{\code{dataSDM$addBias()}}
\item \href{#method-updateFormula}{\code{dataSDM$updateFormula()}}
\item \href{#method-changeComponents}{\code{dataSDM$changeComponents()}}
\item \href{#method-priorsFixed}{\code{dataSDM$priorsFixed()}}
\item \href{#method-specifySpatial}{\code{dataSDM$specifySpatial()}}
\item \href{#method-changeLink}{\code{dataSDM$changeLink()}}
\item \href{#method-spatialBlock}{\code{dataSDM$spatialBlock()}}
\item \href{#method-addMesh}{\code{dataSDM$addMesh()}}
\item \href{#method-new}{\code{dataSDM$new()}}
\item \href{#method-samplingBias}{\code{dataSDM$samplingBias()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-print"></a>}}
\if{latex}{\out{\hypertarget{method-print}{}}}
\subsection{Method \code{print()}}{
Prints the datasets, their data type and the number of observations, as well as the marks and their respective families.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dataSDM$print(...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{...}}{Not used.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-plot"></a>}}
\if{latex}{\out{\hypertarget{method-plot}{}}}
\subsection{Method \code{plot()}}{
Makes a plot of the region as well as the points.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dataSDM$plot(datasetNames, Species = FALSE, Boundary = TRUE, ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{datasetNames}}{Name of the datasets to plot.}

\item{\code{Species}}{Should species be plotted as well? Defaults to \code{FALSE}.}

\item{\code{Boundary}}{Should a boundary (created using the inlaMesh object) be used in the plot. Defaults to \code{TRUE}.}

\item{\code{...}}{Not used.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A ggplot object.
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{
\dontrun{

#Make data object
dataObj <- intModel(...)

#Plot a specific datasets
dataObj$plot(Datasets = c('dataset1', 'dataset2'))

#Plot all datasets
dataObj$plot()

#If speciesName specified in intModel, plot species
dataObj(Species = TRUE)

}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-addData"></a>}}
\if{latex}{\out{\hypertarget{method-addData}{}}}
\subsection{Method \code{addData()}}{
Function used to add additional, and possibly heterogeneous data to the dataSDM object.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dataSDM$addData(
  ...,
  responseCounts,
  responsePA,
  trialsPA,
  markNames,
  markFamily,
  pointCovariates,
  trialsMarks,
  speciesName,
  temporalName,
  Coordinates,
  Offset
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{...}}{The datasets added into the model: should be a data.frame or a SpatialPoints* object.}

\item{\code{responseCounts}}{The name of the response variable for the counts data.}

\item{\code{responsePA}}{The name of the response variable for the presence absence data.}

\item{\code{trialsPA}}{The name of the trials variable for the presence absence data.}

\item{\code{markNames}}{The names of the marks found in the data.}

\item{\code{markFamily}}{The associated distributions of the marks.}

\item{\code{pointCovariates}}{The additional, non-spatial covariates describing the data.}

\item{\code{trialsMarks}}{The name of the trials variable for the binomial marks.}

\item{\code{speciesName}}{The name of the species variable included in the data.}

\item{\code{Coordinates}}{A vector of length 2 describing the names of the coordinates of the data.}
}
\if{html}{\out{</div>}}
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{

#Make data object with specified components
dataObj <- intModel(...)

#Add new data with non-standardized names
dataObj$addData(dataset, responseCounts = responseCounts,
                responsePA = responsePA, trialsPA = trialsPA,
                markNames = markNames, markFamily = markFamily,
                pointCovariates = pointCovariates,
                speciesName = speciesName, Coordinates = Coordinates)

}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-addBias"></a>}}
\if{latex}{\out{\hypertarget{method-addBias}{}}}
\subsection{Method \code{addBias()}}{
Function used to add additional bias fields to different data processes.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dataSDM$addBias(datasetNames = NULL, allPO = FALSE, biasField = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{datasetNames}}{A vector of datasets to add the bias fields to.}

\item{\code{allPO}}{Should the bias fields be added to all the presence only datasets. Defaults to \code{NULL}.}

\item{\code{biasField}}{An inla.spde model descrbing the random bias field.}
}
\if{html}{\out{</div>}}
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{

#Make dataObject
dataObj <- intModel(...)

#Add biasfield for a dataset
dataObj$addBias(datasetNames = 'dataset', biasField = inla.spde2.pcmatern(...))

}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-updateFormula"></a>}}
\if{latex}{\out{\hypertarget{method-updateFormula}{}}}
\subsection{Method \code{updateFormula()}}{
Function to update formulas for a given process.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dataSDM$updateFormula(
  datasetName = NULL,
  Points = TRUE,
  speciesName = NULL,
  markName = NULL,
  Formula,
  allProcesses = FALSE,
  newFormula,
  ...
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{datasetName}}{Name of the dataset to change the formula for.}

\item{\code{Points}}{Logical: should the formula be changed for the points. Defaults to \code{TRUE}. If \code{FALSE}, then markNames needs to be non-null.}

\item{\code{speciesName}}{Name of the species to change the formula for.}

\item{\code{markName}}{Name of the mark to change the formula for.}

\item{\code{Formula}}{An updated formula to give to the process.}

\item{\code{allProcesses}}{Logical argument: if \code{TRUE} changes the formulas for all processes in a dataset.}

\item{\code{newFormula}}{Completely change the formula for a process -- primarily used to add non-linear components into the formula. Note: all terms need to be correctly specified here.}
}
\if{html}{\out{</div>}}
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{

#Make data object
dataObj <- intModel(...)

#View formulas for a dataset
dataObj$updateFormula(datasetName = 'dataset')
#View formula for a species if speciesName is non-null in intModel
dataObj$updateFormula(datasetName = 'dataset', speciesName = 'species')

#Change formula across a dataset
#Main purpose is to remove terms for a specific process
#So start with full model with intModel()
#And thin terms out with .$updateFormula()
dataObj$updateFormula(datasetName = 'dataset', Formula = ~ . -covariate)
dataObj$updateFormula(datasetName = 'dataset', Formula = ~ . -shared_spatial)

#If you would like to add a special term to the model, use the NewFormula argument
dataObj$updateFormula(datasetName = 'dataset', Formula ~ . + (covariate+1e-5)*scaling)
#And then also add that term to the components
dataObj$changeComponents(newComponent = 'scaling')

 }


}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-changeComponents"></a>}}
\if{latex}{\out{\hypertarget{method-changeComponents}{}}}
\subsection{Method \code{changeComponents()}}{
Function to add custom components to the integrated modeling.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dataSDM$changeComponents(addComponent, removeComponent, print = TRUE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{addComponent}}{Component to add to the model.}

\item{\code{removeComponent}}{Component (or name of a component) present in the model which should be removed.}

\item{\code{print}}{Logical: should the updated components be printed. Defaults to \code{TRUE}.}
}
\if{html}{\out{</div>}}
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{

#Make data object first
dataObj <- intModel(...)

#Change a component
dataObj$changeComponent(addComponent = 'dataset_bias(main = coordinates, model = dataset_bias_field, copy = "shared_spatial)')
#Should update the bias field

#Remove a component
datasetObj$changeComponent(removeComponent = 'shared_spatial')
#Will remove shared_spatial from the components + all the formulas it is in

}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-priorsFixed"></a>}}
\if{latex}{\out{\hypertarget{method-priorsFixed}{}}}
\subsection{Method \code{priorsFixed()}}{
Function to change priors for the fixed (and possibly random) effects of the model.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dataSDM$priorsFixed(
  Effect,
  Species = NULL,
  datasetName = NULL,
  mean.linear = 0,
  prec.linear = 0.001
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{Effect}}{Name of the fixed effect covariate to change the prior for.}

\item{\code{Species}}{Name of the species for which the prior should change. Defaults to \code{NULL} which will change the prior for all species added to the model.}

\item{\code{datasetName}}{Name of the dataset for which the prior of the intercept should change (if fixedEffect = 'intercept'). Defaults to \code{NULL} which will change the prior effect of the intercepts for all the datasets in the model.}

\item{\code{mean.linear}}{Mean value for the prior of the fixed effect. Defaults to \code{0}.}

\item{\code{prec.linear}}{Precision value for the prior of the fixed effect. Defaults to \code{0.001}.}
}
\if{html}{\out{</div>}}
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{

#Make data object
dataObj <- intModel(...)

#Change priors for the fixed effect
dataObj$priorsFixed(Effect = 'covariate', mean.linear = 2, prec.linear = 0.05)

#Change priors for intercept
dataObj$priorsFixed(Effect = 'intercept', datasetName = 'datasetname',
                    mean.linear = 2, prec.linear = 0.005)

}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-specifySpatial"></a>}}
\if{latex}{\out{\hypertarget{method-specifySpatial}{}}}
\subsection{Method \code{specifySpatial()}}{
Function to specify the random fields in the model using PC priors for the parameters.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dataSDM$specifySpatial(
  sharedSpatial = FALSE,
  Species,
  Mark,
  Bias,
  PC = TRUE,
  Remove = FALSE,
  ...
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{sharedSpatial}}{Logical: specify the shared spatial field in the model. Defaults to \code{FALSE}.}

\item{\code{Species}}{Name of the species's spatial field to be specified.}

\item{\code{Mark}}{Name of the mark's spatial field to be specified.}

\item{\code{Bias}}{Name of the dataset's bias field to be specified.}

\item{\code{PC}}{Logical: should the Matern model be specified with pc priors. Defaults to \code{TRUE}.}

\item{\code{Remove}}{Logical: should the spatial field be removed. Requires one of sharedSpatial, species, mark or bias to be non-missing.}

\item{\code{...}}{Additional arguments used by INLA's \code{inla.spde2.pcmatern} or \code{inla.spde2.matern} function.}
}
\if{html}{\out{</div>}}
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{

#Create data object
dataObj <- intModel(...)

#Specify spatial field
dataObj$specifySpatial(sharedSpatial = TRUE, PC = TRUE, prior.range = c(1,0.001), prior.sigma = c(1,0.001))
#Specify for a species
dataObj$specifySpatial(species = 'species', alpha = 1, PC = FALSE)

#Remove a spatial field
dataObj$specifySpatial(species = 'species', remove = TRUE)
#Which will also update the components and relevant formulas

}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-changeLink"></a>}}
\if{latex}{\out{\hypertarget{method-changeLink}{}}}
\subsection{Method \code{changeLink()}}{
Function used to change the link function for a given process.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dataSDM$changeLink(datasetName, Species, Mark, Link, ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{datasetName}}{Name of the dataset for which the link function needs to be changed.}

\item{\code{Species}}{Name of the species for which the link function needs to be changed.}

\item{\code{Mark}}{Name of the mark for which the link function needs to be changed.}

\item{\code{Link}}{Name of the link function to add to the process. If missing, will print the link function of the specified dataset.}

\item{\code{...}}{Not used}
}
\if{html}{\out{</div>}}
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{

#Create data object
dataObj <- intModel(...)

#Print link function for a process

dataObj$changeLink(Dataset = Dataset, Species = Species)

#Change link function
dataObj$changeLink(Dataset = Dataset, Species = Species,
                   Link = "log")

}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-spatialBlock"></a>}}
\if{latex}{\out{\hypertarget{method-spatialBlock}{}}}
\subsection{Method \code{spatialBlock()}}{
Function to spatially block the datasets. See the \code{spatialBlock} function from blockCV for spatial blocking.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dataSDM$spatialBlock(k, rows, cols, plot = FALSE, seed = 1234, ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{k}}{Number of cross-validation folds.}

\item{\code{rows}}{Integer value by which the area is divided into latitudinal bins.}

\item{\code{cols}}{Integer value by which the area is divided into longitudinal bins.}

\item{\code{plot}}{Plot the cross-validation folds. Defaults to \code{FALSE}.}

\item{\code{seed}}{Seed used by blockCV's spatialBlock to make the spatialBlock reproducible. Defaults to \code{1234}.}

\item{\code{...}}{Extra arguments used by blockCV's spatialBlock}
}
\if{html}{\out{</div>}}
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{

#Make data object
dataObj <- intModel(...)

#Block the points spatially
dataObj$spatialBlock(k = 5, rows = 2, cols = 5, plot = TRUE)

}

}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-addMesh"></a>}}
\if{latex}{\out{\hypertarget{method-addMesh}{}}}
\subsection{Method \code{addMesh()}}{
Function used to make an inla.mesh object from a spatial boundary and a list of mesh specifications.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dataSDM$addMesh(Boundary, Mesh, Plot = TRUE, ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{Boundary}}{A \code{SpatialPolygons} object surrounding the area of the points.}

\item{\code{Mesh}}{An \code{inla.mesh} object.}

\item{\code{Plot}}{Logical argument: should the new mesh object be printed. Defaults to \code{TRUE}.}

\item{\code{...}}{Additional mesh parameters required by \code{inla.mesh.2d}.}
}
\if{html}{\out{</div>}}
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{

#Make data object
dataObj <- intModel(...)

#Block the points spatially
dataObj$addMesh(Boundary = SpatialPolygons, cutoff=0.1, max.edge=c(0.1, 3), offset=c(1,1))

}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-new"></a>}}
\if{latex}{\out{\hypertarget{method-new}{}}}
\subsection{Method \code{new()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dataSDM$new(
  coordinates,
  projection,
  Inlamesh,
  initialnames,
  responsecounts,
  responsepa,
  marksnames,
  marksfamily,
  pointcovariates,
  trialspa,
  trialsmarks,
  speciesname,
  marksspatial,
  spatial,
  intercepts,
  spatialcovariates,
  marksintercepts,
  boundary,
  ips,
  temporal,
  temporalmodel,
  speciesspatial,
  offset
)}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-samplingBias"></a>}}
\if{latex}{\out{\hypertarget{method-samplingBias}{}}}
\subsection{Method \code{samplingBias()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dataSDM$samplingBias(...)}\if{html}{\out{</div>}}
}

}
}
